// prisma/schema.prisma


generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// ... rest of your models (Parent, Child, etc.)

model Parent {
  id        String   @id @default(uuid())
  email     String   @unique
  name      String?
  children  Child[]
  createdAt DateTime @default(now())
}

model Child {
  id          String      @id @default(uuid())
  name        String
  parentId    String
  parent      Parent      @relation(fields: [parentId], references: [id])
  riskScore   Int         @default(0) // 0-100
  deviceType  String      @default("Mobile")
  dailyUsage  DailyLog[]
  riskEvents  RiskEvent[]
}

model DailyLog {
  id          String   @id @default(uuid())
  childId     String
  child       Child    @relation(fields: [childId], references: [id])
  date        DateTime @default(now())
  screenTime  Int      // in minutes
  topApps     String   // JSON string: '[{"name":"Instagram","mins":120}, ...]'
}

model RiskEvent {
  id          String   @id @default(uuid())
  childId     String
  child       Child    @relation(fields: [childId], references: [id])
  appSource   String
  riskType    String   // "Bullying", "Grooming"
  severity    String   // "Low", "High"
  timestamp   DateTime @default(now())
}